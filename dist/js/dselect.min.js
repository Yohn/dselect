function dselectUpdate(e,t,l){const u=e.dataset.dselectValue,n=e.closest(`.${t}`).previousElementSibling,f=n.nextElementSibling.getElementsByClassName(l)[0],r=n.nextElementSibling.querySelector("input");n&&n.dispatchEvent(new CustomEvent("update",{detail:{button:e,classElement:t,classToggler:l}})),n.multiple?Array.from(n.options).filter(m=>m.value===u)[0].selected=!0:n.value=u,n.multiple&&f.click(),n.dispatchEvent(new Event("change")),f.focus(),r&&(r.value="")}function dselectRemoveTag(e,t,l){const u=e.parentNode.dataset.dselectValue,n=e.closest(`.${t}`).previousElementSibling,f=n.nextElementSibling.getElementsByClassName(l)[0],r=n.nextElementSibling.querySelector("input");n&&n.dispatchEvent(new CustomEvent("removeTag",{detail:{button:e,classElement:t,classToggler:l}})),Array.from(n.options).filter(m=>m.value===u)[0].selected=!1,n.dispatchEvent(new Event("change")),f.click(),r&&(r.value="")}function dselectSearch(e,t,l,u,n,f){const r=t.value.toLowerCase().trim(),m=t.nextElementSibling,x=Array.from(m.querySelectorAll(".dropdown-header")),S=Array.from(m.querySelectorAll(".dropdown-item")),$=m.nextElementSibling,g=t.closest(`.${l}`).previousElementSibling;if(g&&g.dispatchEvent(new CustomEvent("search",{detail:{event:e,input:t,classElement:l,classToggler:u,creatable:n,localization:f}})),x.forEach(o=>o.classList.add("d-none")),S.forEach(o=>{const p=o.textContent.toLowerCase().includes(r);if(o.classList.toggle("d-none",!p),p){let i=o.previousElementSibling;for(;i&&!i.classList.contains("dropdown-header");)i.classList.remove("d-none"),i=i.previousElementSibling}}),x.forEach(o=>{const p=o.textContent.toLowerCase().includes(r);if(o.classList.toggle("d-none",!p),p){let i=o.nextElementSibling;for(;i&&!i.classList.contains("dropdown-header");)i.classList.remove("d-none"),i=i.nextElementSibling}}),S.filter(o=>!o.classList.contains("d-none")&&!o.hasAttribute("hidden")).length===0){if($.classList.remove("d-none"),m.classList.add("d-none"),n&&($.innerHTML=f.replace("[searched-term]",t.value),e.key==="Enter")){const o=g.nextElementSibling.querySelector(`.${u}`);g.insertAdjacentHTML("afterbegin",`<option value="${t.value}" selected>${t.value}</option>`),g.dispatchEvent(new Event("change")),t.value="",t.dispatchEvent(new Event("keyup")),o.click(),o.focus()}}else $.classList.add("d-none"),m.classList.remove("d-none")}function dselectClear(e,t){const l=e.closest(`.${t}`).previousElementSibling;l&&l.dispatchEvent(new CustomEvent("clear",{detail:{event:e,input:t}})),Array.from(l.options).forEach(u=>u.selected=!1),l.dispatchEvent(new Event("change"))}function dselect(e,t={}){e.style.display="none";const l="dselect-wrapper",u="dselect-no-results",n="dselect-tag-remove",f="dselect-tag",r="dselect-placeholder",m="dselect-clear",x="dselect-clearable",S="text-bg-dark bg-gradient",$=!1,g=!1,k=!1,o="360px",y="",p="",i="Search..",B="",q="Press Enter to add '<b>[searched-term]</b>'",N="No results found",j=L("search")||t.search||$,V=L("creatable")||t.creatable||g,H=L("clearable")||t.clearable||k,U=e.dataset.dselectMaxHeight||t.maxHeight||o,D=e.dataset.dselectClassTag||t.classTag||S,G=`${f} ${D}`,M=e.dataset.dselectSearchPlaceholder||t.searchPlaceholder||i,F=e.dataset.dselectSearchExtraClass||t.searchExtraClass||B,J=e.dataset.dselectNoResultsPlaceholder||t.noResultsPlaceholder||N,K=e.dataset.dselectAddOptionPlaceholder||t.addOptionPlaceholder||q,R=e.dataset.dselectItemClass||t.itemClass||p,C=e.dataset.dselectSize||t.size||y,w=`form-select${C!==""?` form-select-${C}`:""}`,Q=j?`<input onkeydown="return event.key !== 'Enter'" onkeyup="dselectSearch(event, this, '${l}', '${w}', ${V}, '${K}')" type="text" class="form-control ${F}" placeholder="${M}" autofocus>`:"";function L(a){const c=`data-dselect-${a}`;return e.hasAttribute(c)?e.getAttribute(c).toLowerCase()==="true":null}function W(){e.nextElementSibling&&e.nextElementSibling.classList&&e.nextElementSibling.classList.contains(l)&&e.nextElementSibling.remove()}function E(a){return a?a.getAttribute("value")==="":!0}function I(a,c){if(c){const s=Array.from(a).filter(d=>d.selected&&!E(d)),v=Array.from(a).filter(d=>E(d));let b=[];if(s.length===0){const d=v.length?v[0].textContent:"&nbsp;";b.push(`<span class="${r}">${d}</span>`)}else for(const d of s)b.push(`
            <div class="${G}" data-dselect-value="${d.value}">
              ${d.text}
              <svg onclick="dselectRemoveTag(this, '${l}', '${w}')" class="${n}" width="14" height="14" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"/><path d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"/></svg>
            </div>
          `);return b.join("")}else{const s=a[a.selectedIndex];return s?E(s)?`<span class="${r}">${s.innerHTML}</span>`:s.innerHTML:`<span class="${r}">${M}</span>`}}function O(a){const c=a[a.selectedIndex];return E(c)?"":c.textContent}function z(a){let c=[];for(const s of a)if(s.tagName==="OPTGROUP")c.push(`<h6 class="dropdown-header">${s.getAttribute("label")}</h6>`);else{const v=E(s)?" hidden":"",b=s.selected?" active":"",d=s.selected?" disabled":"",h=s.getAttribute("disabled"),Z=R===""?"":" "+R;let T="";h!==null?T="disabled='true'":T="";const _=s.value;let A=s.textContent;if(s.hasAttribute("data-dselect-img")&&s.getAttribute("data-dselect-img").trim()!==""){const ee=s.getAttribute("data-dselect-img").trim();let P="1rem";C=="sm"?P=".7rem":C=="lg"&&(P="1.2rem"),A=`<span class="d-flex align-items-center">
            <img src="${ee}" style="max-height:${P}; width:auto;">
            <span class="ps-2">${A}</span>
          </span>`}c.push(`<button${v} class="dropdown-item${b}${Z}" ${T} data-dselect-value="${_}" type="button" onclick="dselectUpdate(this, '${l}', '${w}')" ${d}>
          ${A}
        </button>`)}return c=c.join(""),c}function X(){const a=e.multiple?' data-bs-auto-close="outside"':"",c=Array.from(e.classList).filter(h=>h!=="form-select"&&h!=="form-select-sm"&&h!=="form-select-lg").join(" "),s=H&&!e.multiple?`
    <button type="button" class="btn ${m}" title="Clear selection" onclick="dselectClear(this, '${l}')">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14" fill="none">
        <path d="M13 1L0.999999 13" stroke-width="2" stroke="currentColor"></path>
        <path d="M1 1L13 13" stroke-width="2" stroke="currentColor"></path>
      </svg>
    </button>
    `:"",v=z(e.querySelectorAll("*")),b=`
    <div class="dropdown ${l} ${c}">
      <button class="${w} ${!e.multiple&&H?x:""}" data-dselect-text="${!e.multiple&&O(e.options)}" type="button" data-bs-toggle="dropdown" aria-expanded="false"${a}>
        ${I(e.options,e.multiple)}
      </button>
      <div class="dropdown-menu">
        <div class="d-flex flex-column">
          ${Q}
          <div class="dselect-items" style="max-height:${U};overflow:auto">
            ${v}
          </div>
          <div class="${u} ${v.length?"d-none":""}">${J}</div>
        </div>
      </div>
      ${s}
    </div>`;W(),e.insertAdjacentHTML("afterend",b),e.nextElementSibling.addEventListener("shown.bs.dropdown",function(){const h=this.querySelector('input[type="text"]');h&&h.focus()})}X();function Y(){const a=e.nextElementSibling,c=a.getElementsByClassName(w)[0],s=a.getElementsByClassName("dselect-items")[0];c.innerHTML=I(e.options,e.multiple),s.innerHTML=z(e.querySelectorAll("*")),e.multiple||(c.dataset.dselectText=O(e.options))}e.addEventListener("change",Y)}typeof window!="undefined"&&(window.dselectUpdate=dselectUpdate,window.dselectRemoveTag=dselectRemoveTag,window.dselectSearch=dselectSearch,window.dselectClear=dselectClear,window.dselect=dselect);
